{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import axios from'axios';// Import the image utility function\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getTourImage=id=>{const images=['https://images.unsplash.com/photo-1499856871958-5b9627545d1a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',// Paris\n'https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1936&q=80',// Tokyo\n'https://images.unsplash.com/photo-1496588152823-86ff7695e68f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1950&q=80',// New York\n'https://images.unsplash.com/photo-1547471080-7cc2caa01a7e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1871&q=80',// Safari\n'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1886&q=80',// Venice\n'https://images.unsplash.com/photo-1526392060635-9d6019884377?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80',// Peru\n'https://images.unsplash.com/photo-1587139223877-04cb899fa3e8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80',// Australia\n'https://images.unsplash.com/photo-1520769490320-493e53d9a43f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1856&q=80',// Norway\n'https://images.unsplash.com/photo-1613395877344-13d4a8e0d49e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1935&q=80',// Greece\n'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80'// Thailand\n];// Use modulo to ensure we don't go out of bounds\nconst index=(id-1)%images.length;return images[index];};const Booking=()=>{const{id}=useParams();const navigate=useNavigate();const[tour,setTour]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[bookingInfo,setBookingInfo]=useState({fullName:'',email:'',phone:'',date:'',participants:1,specialRequests:''});const[submitted,setSubmitted]=useState(false);const[availableDates,setAvailableDates]=useState([]);const[selectedDateInfo,setSelectedDateInfo]=useState(null);// Generate dates for next 3 months with random available spots\nuseEffect(()=>{const generateAvailableDates=()=>{const dates=[];const today=new Date();// Generate dates for the next 3 months\nfor(let i=1;i<=90;i++){const date=new Date(today);date.setDate(today.getDate()+i);// Only include some dates (random selection)\nif(Math.random()>0.6){const availableSpots=Math.floor(Math.random()*8)+1;// 1-8 available spots\ndates.push({date:date.toISOString().split('T')[0],availableSpots});}}setAvailableDates(dates);};generateAvailableDates();},[]);useEffect(()=>{const fetchTourDetails=async()=>{try{const response=await axios.get(`/api/tours/${id}`);setTour(response.data.data.tour);setLoading(false);}catch(err){setError('Failed to fetch tour details. Please try again later.');setLoading(false);console.error('Error fetching tour details:',err);}};fetchTourDetails();// Scroll to top when component mounts\nwindow.scrollTo(0,0);},[id]);const handleInputChange=e=>{const{name,value}=e.target;setBookingInfo({...bookingInfo,[name]:value});// When date changes, find and set the selected date info\nif(name==='date'){const dateInfo=availableDates.find(d=>d.date===value);setSelectedDateInfo(dateInfo);}};const handleSubmit=e=>{e.preventDefault();setSubmitted(true);// Get user from localStorage if available\nconst loggedInUser=localStorage.getItem('user');let userId=null;if(loggedInUser){const userData=JSON.parse(loggedInUser);userId=userData.id;}// Call our API to save the booking to MongoDB\naxios.post('/api/bookings',{tourId:id,...bookingInfo,tourTitle:tour.title,tourLocation:tour.location,price:tour.price,totalPrice:bookingInfo.participants>=4?tour.price*bookingInfo.participants*0.9:tour.price*bookingInfo.participants,bookingDate:new Date().toISOString(),userId:userId,// Add user ID if available\nuserEmail:bookingInfo.email// Store email for non-logged in bookings\n}).then(response=>{// On successful booking, navigate to confirmation page\nsetTimeout(()=>{navigate('/booking-confirmation',{state:{tour,bookingInfo,bookingId:response.data.data.booking._id,emailPreviewUrl:response.data.data.emailPreviewUrl}});},1500);}).catch(err=>{setError('Failed to save booking. Please try again.');setSubmitted(false);console.error('Error saving booking:',err);});};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:\"Loading tour information...\"})]});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-exclamation-triangle me-2\"}),error]})});}if(!tour){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-info\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-info-circle me-2\"}),\"Tour not found.\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/tours\",className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left me-2\"}),\"Back to Tours\"]})]});}if(submitted){return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-success\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Processing booking...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 lead\",children:\"Processing your booking. Please wait...\"})]});}// Group the available dates by month\nconst datesByMonth=availableDates.reduce((acc,dateInfo)=>{const month=dateInfo.date.substring(0,7);// YYYY-MM format\nif(!acc[month])acc[month]=[];acc[month].push(dateInfo);return acc;},{});return/*#__PURE__*/_jsxs(\"div\",{className:\"fade-in\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero-section\",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.7)), url(${getTourImage(parseInt(id))})`,height:'30vh'},children:/*#__PURE__*/_jsx(\"div\",{className:\"hero-overlay d-flex align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container hero-text\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"display-5 fw-bold\",children:\"Book Your Tour\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"lead text-white mb-0\",children:[\"Fill in your details to book \",tour.title]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container my-5 detail-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-info mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-info-circle me-2\"}),\"You're booking: \",/*#__PURE__*/_jsx(\"strong\",{children:tour.title}),\" (\",tour.location,\")\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"booking-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fullName\",className:\"form-label\",children:\"Full Name *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"fullName\",name:\"fullName\",value:bookingInfo.fullName,onChange:handleInputChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-envelope\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:bookingInfo.email,onChange:handleInputChange,required:true})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",className:\"form-label\",children:\"Phone Number *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-telephone\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control\",id:\"phone\",name:\"phone\",value:bookingInfo.phone,onChange:handleInputChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"participants\",className:\"form-label\",children:\"Number of Participants *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-people\"})}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select\",id:\"participants\",name:\"participants\",value:bookingInfo.participants,onChange:handleInputChange,required:true,children:[1,2,3,4,5,6,7,8,9,10].map(num=>/*#__PURE__*/_jsx(\"option\",{value:num,children:num},num))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",className:\"form-label\",children:\"Tour Date *\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card border shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-calendar3 text-primary fs-4 me-2\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-0\",children:\"Select your preferred date\"})]}),Object.keys(datesByMonth).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"date-selector\",children:Object.keys(datesByMonth).sort().map(month=>{const monthName=new Date(month+'-01').toLocaleString('default',{month:'long',year:'numeric'});return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted mb-3\",children:monthName}),/*#__PURE__*/_jsx(\"div\",{className:\"date-grid\",children:datesByMonth[month].map(dateInfo=>{const day=new Date(dateInfo.date).getDate();const dayName=new Date(dateInfo.date).toLocaleString('default',{weekday:'short'});return/*#__PURE__*/_jsxs(\"div\",{className:\"date-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"btn-check\",name:\"date\",id:`date-${dateInfo.date}`,value:dateInfo.date,checked:bookingInfo.date===dateInfo.date,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsxs(\"label\",{className:`btn btn-outline-primary date-btn w-100 ${dateInfo.availableSpots<bookingInfo.participants?'disabled':''}`,htmlFor:`date-${dateInfo.date}`,title:dateInfo.availableSpots<bookingInfo.participants?'Not enough spots available':'',children:[/*#__PURE__*/_jsx(\"div\",{className:\"small mb-1\",children:dayName}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:day}),/*#__PURE__*/_jsxs(\"div\",{className:\"small mt-1\",children:[dateInfo.availableSpots,\" \",dateInfo.availableSpots===1?'spot':'spots']})]})]},dateInfo.date);})})]},month);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-muted py-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-calendar-x fs-1\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"No available dates found for this tour\"})]}),bookingInfo.date&&selectedDateInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success mt-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle me-2\"}),\"You've selected \",/*#__PURE__*/_jsx(\"strong\",{children:new Date(bookingInfo.date).toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}),\" with \",selectedDateInfo.availableSpots,\" available spot(s).\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"specialRequests\",className:\"form-label\",children:\"Special Requests\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"specialRequests\",name:\"specialRequests\",rows:\"3\",value:bookingInfo.specialRequests,onChange:handleInputChange,placeholder:\"Any special requests or dietary requirements\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 d-md-flex justify-content-md-end\",children:[/*#__PURE__*/_jsxs(Link,{to:`/tours/${id}`,className:\"btn btn-outline-secondary me-md-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left me-2\"}),\"Back to Tour\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary btn-animated\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check-circle me-2\"}),\"Complete Booking\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm sticky-top\",style:{top:'20px'},children:[/*#__PURE__*/_jsx(\"img\",{src:getTourImage(parseInt(id)),className:\"card-img-top\",alt:tour.title,style:{height:\"200px\",objectFit:\"cover\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"Booking Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Tour:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:tour.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Location:\"}),/*#__PURE__*/_jsx(\"span\",{children:tour.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Duration:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[tour.duration,\" days\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Price per person:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",tour.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Participants:\"}),/*#__PURE__*/_jsx(\"span\",{children:bookingInfo.participants})]}),bookingInfo.participants>=4&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2 text-success\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Group Discount (10%):\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-$\",(tour.price*bookingInfo.participants*0.1).toFixed(2)]})]}),bookingInfo.date&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(bookingInfo.date).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"strong\",{className:\"fs-5 text-primary\",children:[\"$\",bookingInfo.participants>=4?(tour.price*bookingInfo.participants*0.9).toFixed(2):(tour.price*bookingInfo.participants).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"small text-muted mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-shield-check text-success me-2\"}),\"Free cancellation up to 24 hours before the tour.\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-credit-card me-2 text-success\"}),\"Secure payment - all major credit cards accepted.\"]})]})]})]})})]})})]});};export default Booking;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","axios","jsx","_jsx","jsxs","_jsxs","getTourImage","id","images","index","length","Booking","navigate","tour","setTour","loading","setLoading","error","setError","bookingInfo","setBookingInfo","fullName","email","phone","date","participants","specialRequests","submitted","setSubmitted","availableDates","setAvailableDates","selectedDateInfo","setSelectedDateInfo","generateAvailableDates","dates","today","Date","i","setDate","getDate","Math","random","availableSpots","floor","push","toISOString","split","fetchTourDetails","response","get","data","err","console","window","scrollTo","handleInputChange","e","name","value","target","dateInfo","find","d","handleSubmit","preventDefault","loggedInUser","localStorage","getItem","userId","userData","JSON","parse","post","tourId","tourTitle","title","tourLocation","location","price","totalPrice","bookingDate","userEmail","then","setTimeout","state","bookingId","booking","_id","emailPreviewUrl","catch","className","children","role","to","datesByMonth","reduce","acc","month","substring","style","backgroundImage","parseInt","height","onSubmit","htmlFor","type","onChange","required","map","num","Object","keys","sort","monthName","toLocaleString","year","day","dayName","weekday","checked","toLocaleDateString","rows","placeholder","top","src","alt","objectFit","duration","toFixed"],"sources":["/Users/durgaprasadcreddy/Desktop/project/tourbuddy/frontend/src/pages/Booking.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\n\n// Import the image utility function\nconst getTourImage = (id) => {\n  const images = [\n    'https://images.unsplash.com/photo-1499856871958-5b9627545d1a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80', // Paris\n    'https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1936&q=80', // Tokyo\n    'https://images.unsplash.com/photo-1496588152823-86ff7695e68f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1950&q=80', // New York\n    'https://images.unsplash.com/photo-1547471080-7cc2caa01a7e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1871&q=80', // Safari\n    'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1886&q=80', // Venice\n    'https://images.unsplash.com/photo-1526392060635-9d6019884377?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80', // Peru\n    'https://images.unsplash.com/photo-1587139223877-04cb899fa3e8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80', // Australia\n    'https://images.unsplash.com/photo-1520769490320-493e53d9a43f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1856&q=80', // Norway\n    'https://images.unsplash.com/photo-1613395877344-13d4a8e0d49e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1935&q=80', // Greece\n    'https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80', // Thailand\n  ];\n  \n  // Use modulo to ensure we don't go out of bounds\n  const index = (id - 1) % images.length;\n  return images[index];\n};\n\nconst Booking = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [tour, setTour] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [bookingInfo, setBookingInfo] = useState({\n    fullName: '',\n    email: '',\n    phone: '',\n    date: '',\n    participants: 1,\n    specialRequests: ''\n  });\n  const [submitted, setSubmitted] = useState(false);\n  const [availableDates, setAvailableDates] = useState([]);\n  const [selectedDateInfo, setSelectedDateInfo] = useState(null);\n\n  // Generate dates for next 3 months with random available spots\n  useEffect(() => {\n    const generateAvailableDates = () => {\n      const dates = [];\n      const today = new Date();\n      \n      // Generate dates for the next 3 months\n      for (let i = 1; i <= 90; i++) {\n        const date = new Date(today);\n        date.setDate(today.getDate() + i);\n        \n        // Only include some dates (random selection)\n        if (Math.random() > 0.6) {\n          const availableSpots = Math.floor(Math.random() * 8) + 1; // 1-8 available spots\n          dates.push({\n            date: date.toISOString().split('T')[0],\n            availableSpots\n          });\n        }\n      }\n      \n      setAvailableDates(dates);\n    };\n    \n    generateAvailableDates();\n  }, []);\n\n  useEffect(() => {\n    const fetchTourDetails = async () => {\n      try {\n        const response = await axios.get(`/api/tours/${id}`);\n        setTour(response.data.data.tour);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to fetch tour details. Please try again later.');\n        setLoading(false);\n        console.error('Error fetching tour details:', err);\n      }\n    };\n\n    fetchTourDetails();\n    // Scroll to top when component mounts\n    window.scrollTo(0, 0);\n  }, [id]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setBookingInfo({\n      ...bookingInfo,\n      [name]: value\n    });\n    \n    // When date changes, find and set the selected date info\n    if (name === 'date') {\n      const dateInfo = availableDates.find(d => d.date === value);\n      setSelectedDateInfo(dateInfo);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    setSubmitted(true);\n    \n    // Get user from localStorage if available\n    const loggedInUser = localStorage.getItem('user');\n    let userId = null;\n    \n    if (loggedInUser) {\n      const userData = JSON.parse(loggedInUser);\n      userId = userData.id;\n    }\n    \n    // Call our API to save the booking to MongoDB\n    axios.post('/api/bookings', {\n      tourId: id,\n      ...bookingInfo,\n      tourTitle: tour.title,\n      tourLocation: tour.location,\n      price: tour.price,\n      totalPrice: bookingInfo.participants >= 4 \n        ? (tour.price * bookingInfo.participants * 0.9) \n        : (tour.price * bookingInfo.participants),\n      bookingDate: new Date().toISOString(),\n      userId: userId,  // Add user ID if available\n      userEmail: bookingInfo.email // Store email for non-logged in bookings\n    })\n    .then(response => {\n      // On successful booking, navigate to confirmation page\n      setTimeout(() => {\n        navigate('/booking-confirmation', { \n          state: { \n            tour, \n            bookingInfo,\n            bookingId: response.data.data.booking._id,\n            emailPreviewUrl: response.data.data.emailPreviewUrl\n          } \n        });\n      }, 1500);\n    })\n    .catch(err => {\n      setError('Failed to save booking. Please try again.');\n      setSubmitted(false);\n      console.error('Error saving booking:', err);\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mt-5 text-center\">\n        <div className=\"spinner-border text-primary\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n        <p className=\"mt-3\">Loading tour information...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mt-5\">\n        <div className=\"alert alert-danger\" role=\"alert\">\n          <i className=\"bi bi-exclamation-triangle me-2\"></i>\n          {error}\n        </div>\n      </div>\n    );\n  }\n\n  if (!tour) {\n    return (\n      <div className=\"container mt-5\">\n        <div className=\"alert alert-info\" role=\"alert\">\n          <i className=\"bi bi-info-circle me-2\"></i>\n          Tour not found.\n        </div>\n        <Link to=\"/tours\" className=\"btn btn-primary\">\n          <i className=\"bi bi-arrow-left me-2\"></i>\n          Back to Tours\n        </Link>\n      </div>\n    );\n  }\n\n  if (submitted) {\n    return (\n      <div className=\"container mt-5 text-center\">\n        <div className=\"spinner-border text-success\" role=\"status\">\n          <span className=\"visually-hidden\">Processing booking...</span>\n        </div>\n        <p className=\"mt-3 lead\">Processing your booking. Please wait...</p>\n      </div>\n    );\n  }\n\n  // Group the available dates by month\n  const datesByMonth = availableDates.reduce((acc, dateInfo) => {\n    const month = dateInfo.date.substring(0, 7); // YYYY-MM format\n    if (!acc[month]) acc[month] = [];\n    acc[month].push(dateInfo);\n    return acc;\n  }, {});\n\n  return (\n    <div className=\"fade-in\">\n      <div \n        className=\"hero-section\" \n        style={{ \n          backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.7)), url(${getTourImage(parseInt(id))})`,\n          height: '30vh'\n        }}\n      >\n        <div className=\"hero-overlay d-flex align-items-center\">\n          <div className=\"container hero-text\">\n            <h1 className=\"display-5 fw-bold\">Book Your Tour</h1>\n            <p className=\"lead text-white mb-0\">Fill in your details to book {tour.title}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container my-5 detail-section\">\n        <div className=\"row\">\n          <div className=\"col-lg-8\">\n            <div className=\"alert alert-info mb-4\">\n              <i className=\"bi bi-info-circle me-2\"></i>\n              You're booking: <strong>{tour.title}</strong> ({tour.location})\n            </div>\n            \n            <form onSubmit={handleSubmit} className=\"booking-form\">\n              <div className=\"row mb-4\">\n                <div className=\"col-md-6 mb-3\">\n                  <label htmlFor=\"fullName\" className=\"form-label\">Full Name *</label>\n                  <div className=\"input-group\">\n                    <span className=\"input-group-text\">\n                      <i className=\"bi bi-person\"></i>\n                    </span>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"fullName\"\n                      name=\"fullName\"\n                      value={bookingInfo.fullName}\n                      onChange={handleInputChange}\n                      required\n                    />\n                  </div>\n                </div>\n                <div className=\"col-md-6 mb-3\">\n                  <label htmlFor=\"email\" className=\"form-label\">Email *</label>\n                  <div className=\"input-group\">\n                    <span className=\"input-group-text\">\n                      <i className=\"bi bi-envelope\"></i>\n                    </span>\n                    <input\n                      type=\"email\"\n                      className=\"form-control\"\n                      id=\"email\"\n                      name=\"email\"\n                      value={bookingInfo.email}\n                      onChange={handleInputChange}\n                      required\n                    />\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"row mb-4\">\n                <div className=\"col-md-6 mb-3\">\n                  <label htmlFor=\"phone\" className=\"form-label\">Phone Number *</label>\n                  <div className=\"input-group\">\n                    <span className=\"input-group-text\">\n                      <i className=\"bi bi-telephone\"></i>\n                    </span>\n                    <input\n                      type=\"tel\"\n                      className=\"form-control\"\n                      id=\"phone\"\n                      name=\"phone\"\n                      value={bookingInfo.phone}\n                      onChange={handleInputChange}\n                      required\n                    />\n                  </div>\n                </div>\n                <div className=\"col-md-6 mb-3\">\n                  <label htmlFor=\"participants\" className=\"form-label\">Number of Participants *</label>\n                  <div className=\"input-group\">\n                    <span className=\"input-group-text\">\n                      <i className=\"bi bi-people\"></i>\n                    </span>\n                    <select\n                      className=\"form-select\"\n                      id=\"participants\"\n                      name=\"participants\"\n                      value={bookingInfo.participants}\n                      onChange={handleInputChange}\n                      required\n                    >\n                      {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(num => (\n                        <option key={num} value={num}>{num}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"mb-4\">\n                <label htmlFor=\"date\" className=\"form-label\">Tour Date *</label>\n                <div className=\"card border shadow-sm\">\n                  <div className=\"card-body p-3\">\n                    <div className=\"d-flex align-items-center mb-3\">\n                      <i className=\"bi bi-calendar3 text-primary fs-4 me-2\"></i>\n                      <h5 className=\"card-title mb-0\">Select your preferred date</h5>\n                    </div>\n                    \n                    {Object.keys(datesByMonth).length > 0 ? (\n                      <div className=\"date-selector\">\n                        {Object.keys(datesByMonth).sort().map(month => {\n                          const monthName = new Date(month + '-01').toLocaleString('default', { month: 'long', year: 'numeric' });\n                          \n                          return (\n                            <div key={month} className=\"mb-4\">\n                              <h6 className=\"text-muted mb-3\">{monthName}</h6>\n                              <div className=\"date-grid\">\n                                {datesByMonth[month].map(dateInfo => {\n                                  const day = new Date(dateInfo.date).getDate();\n                                  const dayName = new Date(dateInfo.date).toLocaleString('default', { weekday: 'short' });\n                                  \n                                  return (\n                                    <div key={dateInfo.date} className=\"date-option\">\n                                      <input\n                                        type=\"radio\"\n                                        className=\"btn-check\"\n                                        name=\"date\"\n                                        id={`date-${dateInfo.date}`}\n                                        value={dateInfo.date}\n                                        checked={bookingInfo.date === dateInfo.date}\n                                        onChange={handleInputChange}\n                                        required\n                                      />\n                                      <label \n                                        className={`btn btn-outline-primary date-btn w-100 ${dateInfo.availableSpots < bookingInfo.participants ? 'disabled' : ''}`} \n                                        htmlFor={`date-${dateInfo.date}`}\n                                        title={dateInfo.availableSpots < bookingInfo.participants ? 'Not enough spots available' : ''}\n                                      >\n                                        <div className=\"small mb-1\">{dayName}</div>\n                                        <div className=\"fw-bold\">{day}</div>\n                                        <div className=\"small mt-1\">\n                                          {dateInfo.availableSpots} {dateInfo.availableSpots === 1 ? 'spot' : 'spots'}\n                                        </div>\n                                      </label>\n                                    </div>\n                                  );\n                                })}\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    ) : (\n                      <div className=\"text-center text-muted py-4\">\n                        <i className=\"bi bi-calendar-x fs-1\"></i>\n                        <p className=\"mt-2\">No available dates found for this tour</p>\n                      </div>\n                    )}\n                    \n                    {bookingInfo.date && selectedDateInfo && (\n                      <div className=\"alert alert-success mt-3\">\n                        <i className=\"bi bi-check-circle me-2\"></i>\n                        You've selected <strong>{new Date(bookingInfo.date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</strong> with {selectedDateInfo.availableSpots} available spot(s).\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"mb-4\">\n                <label htmlFor=\"specialRequests\" className=\"form-label\">Special Requests</label>\n                <textarea\n                  className=\"form-control\"\n                  id=\"specialRequests\"\n                  name=\"specialRequests\"\n                  rows=\"3\"\n                  value={bookingInfo.specialRequests}\n                  onChange={handleInputChange}\n                  placeholder=\"Any special requests or dietary requirements\"\n                ></textarea>\n              </div>\n              \n              <div className=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n                <Link to={`/tours/${id}`} className=\"btn btn-outline-secondary me-md-2\">\n                  <i className=\"bi bi-arrow-left me-2\"></i>\n                  Back to Tour\n                </Link>\n                <button type=\"submit\" className=\"btn btn-primary btn-animated\">\n                  <i className=\"bi bi-check-circle me-2\"></i>\n                  Complete Booking\n                </button>\n              </div>\n            </form>\n          </div>\n          \n          <div className=\"col-lg-4\">\n            <div className=\"card border-0 shadow-sm sticky-top\" style={{ top: '20px' }}>\n              <img \n                src={getTourImage(parseInt(id))} \n                className=\"card-img-top\" \n                alt={tour.title}\n                style={{ height: \"200px\", objectFit: \"cover\" }}\n              />\n              <div className=\"card-body\">\n                <h4 className=\"card-title\">Booking Summary</h4>\n                <hr />\n                <div className=\"d-flex justify-content-between mb-2\">\n                  <span>Tour:</span>\n                  <span className=\"fw-bold\">{tour.title}</span>\n                </div>\n                <div className=\"d-flex justify-content-between mb-2\">\n                  <span>Location:</span>\n                  <span>{tour.location}</span>\n                </div>\n                <div className=\"d-flex justify-content-between mb-2\">\n                  <span>Duration:</span>\n                  <span>{tour.duration} days</span>\n                </div>\n                <div className=\"d-flex justify-content-between mb-2\">\n                  <span>Price per person:</span>\n                  <span>${tour.price}</span>\n                </div>\n                <div className=\"d-flex justify-content-between mb-2\">\n                  <span>Participants:</span>\n                  <span>{bookingInfo.participants}</span>\n                </div>\n                \n                {bookingInfo.participants >= 4 && (\n                  <div className=\"d-flex justify-content-between mb-2 text-success\">\n                    <span>Group Discount (10%):</span>\n                    <span>-${(tour.price * bookingInfo.participants * 0.1).toFixed(2)}</span>\n                  </div>\n                )}\n                \n                {bookingInfo.date && (\n                  <div className=\"d-flex justify-content-between mb-2\">\n                    <span>Date:</span>\n                    <span>{new Date(bookingInfo.date).toLocaleDateString()}</span>\n                  </div>\n                )}\n                \n                <hr />\n                <div className=\"d-flex justify-content-between mb-2\">\n                  <strong>Total:</strong>\n                  <strong className=\"fs-5 text-primary\">${bookingInfo.participants >= 4 \n                    ? (tour.price * bookingInfo.participants * 0.9).toFixed(2) \n                    : (tour.price * bookingInfo.participants).toFixed(2)}</strong>\n                </div>\n                <div className=\"small text-muted mt-3\">\n                  <div className=\"mb-2\">\n                    <i className=\"bi bi-shield-check text-success me-2\"></i>\n                    Free cancellation up to 24 hours before the tour.\n                  </div>\n                  <div>\n                    <i className=\"bi bi-credit-card me-2 text-success\"></i>\n                    Secure payment - all major credit cards accepted.\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Booking; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAC/D,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,YAAY,CAAIC,EAAE,EAAK,CAC3B,KAAM,CAAAC,MAAM,CAAG,CACb,wKAAwK,CAAE;AAC1K,wKAAwK,CAAE;AAC1K,wKAAwK,CAAE;AAC1K,qKAAqK,CAAE;AACvK,wKAAwK,CAAE;AAC1K,wKAAwK,CAAE;AAC1K,wKAAwK,CAAE;AAC1K,wKAAwK,CAAE;AAC1K,wKAAwK,CAAE;AAC1K,wKAA0K;AAAA,CAC3K,CAED;AACA,KAAM,CAAAC,KAAK,CAAG,CAACF,EAAE,CAAG,CAAC,EAAIC,MAAM,CAACE,MAAM,CACtC,MAAO,CAAAF,MAAM,CAACC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAAE,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAAEJ,EAAG,CAAC,CAAGT,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAc,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACc,IAAI,CAAEC,OAAO,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACqB,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACuB,WAAW,CAAEC,cAAc,CAAC,CAAGxB,QAAQ,CAAC,CAC7CyB,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,EAAE,CACRC,YAAY,CAAE,CAAC,CACfC,eAAe,CAAE,EACnB,CAAC,CAAC,CACF,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGhC,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACiC,cAAc,CAAEC,iBAAiB,CAAC,CAAGlC,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACmC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGpC,QAAQ,CAAC,IAAI,CAAC,CAE9D;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoC,sBAAsB,CAAGA,CAAA,GAAM,CACnC,KAAM,CAAAC,KAAK,CAAG,EAAE,CAChB,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAExB;AACA,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,EAAI,EAAE,CAAEA,CAAC,EAAE,CAAE,CAC5B,KAAM,CAAAb,IAAI,CAAG,GAAI,CAAAY,IAAI,CAACD,KAAK,CAAC,CAC5BX,IAAI,CAACc,OAAO,CAACH,KAAK,CAACI,OAAO,CAAC,CAAC,CAAGF,CAAC,CAAC,CAEjC;AACA,GAAIG,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAE,CACvB,KAAM,CAAAC,cAAc,CAAGF,IAAI,CAACG,KAAK,CAACH,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,CAAC,CAAC,CAAG,CAAC,CAAE;AAC1DP,KAAK,CAACU,IAAI,CAAC,CACTpB,IAAI,CAAEA,IAAI,CAACqB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACtCJ,cACF,CAAC,CAAC,CACJ,CACF,CAEAZ,iBAAiB,CAACI,KAAK,CAAC,CAC1B,CAAC,CAEDD,sBAAsB,CAAC,CAAC,CAC1B,CAAC,CAAE,EAAE,CAAC,CAENpC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkD,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA/C,KAAK,CAACgD,GAAG,CAAC,cAAc1C,EAAE,EAAE,CAAC,CACpDO,OAAO,CAACkC,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACrC,IAAI,CAAC,CAChCG,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOmC,GAAG,CAAE,CACZjC,QAAQ,CAAC,uDAAuD,CAAC,CACjEF,UAAU,CAAC,KAAK,CAAC,CACjBoC,OAAO,CAACnC,KAAK,CAAC,8BAA8B,CAAEkC,GAAG,CAAC,CACpD,CACF,CAAC,CAEDJ,gBAAgB,CAAC,CAAC,CAClB;AACAM,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAE,CAAC,CAAC,CACvB,CAAC,CAAE,CAAC/C,EAAE,CAAC,CAAC,CAER,KAAM,CAAAgD,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCvC,cAAc,CAAC,CACb,GAAGD,WAAW,CACd,CAACsC,IAAI,EAAGC,KACV,CAAC,CAAC,CAEF;AACA,GAAID,IAAI,GAAK,MAAM,CAAE,CACnB,KAAM,CAAAG,QAAQ,CAAG/B,cAAc,CAACgC,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACtC,IAAI,GAAKkC,KAAK,CAAC,CAC3D1B,mBAAmB,CAAC4B,QAAQ,CAAC,CAC/B,CACF,CAAC,CAED,KAAM,CAAAG,YAAY,CAAIP,CAAC,EAAK,CAC1BA,CAAC,CAACQ,cAAc,CAAC,CAAC,CAElBpC,YAAY,CAAC,IAAI,CAAC,CAElB;AACA,KAAM,CAAAqC,YAAY,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CACjD,GAAI,CAAAC,MAAM,CAAG,IAAI,CAEjB,GAAIH,YAAY,CAAE,CAChB,KAAM,CAAAI,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACN,YAAY,CAAC,CACzCG,MAAM,CAAGC,QAAQ,CAAC9D,EAAE,CACtB,CAEA;AACAN,KAAK,CAACuE,IAAI,CAAC,eAAe,CAAE,CAC1BC,MAAM,CAAElE,EAAE,CACV,GAAGY,WAAW,CACduD,SAAS,CAAE7D,IAAI,CAAC8D,KAAK,CACrBC,YAAY,CAAE/D,IAAI,CAACgE,QAAQ,CAC3BC,KAAK,CAAEjE,IAAI,CAACiE,KAAK,CACjBC,UAAU,CAAE5D,WAAW,CAACM,YAAY,EAAI,CAAC,CACpCZ,IAAI,CAACiE,KAAK,CAAG3D,WAAW,CAACM,YAAY,CAAG,GAAG,CAC3CZ,IAAI,CAACiE,KAAK,CAAG3D,WAAW,CAACM,YAAa,CAC3CuD,WAAW,CAAE,GAAI,CAAA5C,IAAI,CAAC,CAAC,CAACS,WAAW,CAAC,CAAC,CACrCuB,MAAM,CAAEA,MAAM,CAAG;AACjBa,SAAS,CAAE9D,WAAW,CAACG,KAAM;AAC/B,CAAC,CAAC,CACD4D,IAAI,CAAClC,QAAQ,EAAI,CAChB;AACAmC,UAAU,CAAC,IAAM,CACfvE,QAAQ,CAAC,uBAAuB,CAAE,CAChCwE,KAAK,CAAE,CACLvE,IAAI,CACJM,WAAW,CACXkE,SAAS,CAAErC,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACoC,OAAO,CAACC,GAAG,CACzCC,eAAe,CAAExC,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACsC,eACtC,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAC,CACDC,KAAK,CAACtC,GAAG,EAAI,CACZjC,QAAQ,CAAC,2CAA2C,CAAC,CACrDU,YAAY,CAAC,KAAK,CAAC,CACnBwB,OAAO,CAACnC,KAAK,CAAC,uBAAuB,CAAEkC,GAAG,CAAC,CAC7C,CAAC,CAAC,CACJ,CAAC,CAED,GAAIpC,OAAO,CAAE,CACX,mBACEV,KAAA,QAAKqF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzCxF,IAAA,QAAKuF,SAAS,CAAC,6BAA6B,CAACE,IAAI,CAAC,QAAQ,CAAAD,QAAA,cACxDxF,IAAA,SAAMuF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,CAChD,CAAC,cACNxF,IAAA,MAAGuF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,6BAA2B,CAAG,CAAC,EAChD,CAAC,CAEV,CAEA,GAAI1E,KAAK,CAAE,CACT,mBACEd,IAAA,QAAKuF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BtF,KAAA,QAAKqF,SAAS,CAAC,oBAAoB,CAACE,IAAI,CAAC,OAAO,CAAAD,QAAA,eAC9CxF,IAAA,MAAGuF,SAAS,CAAC,iCAAiC,CAAI,CAAC,CAClDzE,KAAK,EACH,CAAC,CACH,CAAC,CAEV,CAEA,GAAI,CAACJ,IAAI,CAAE,CACT,mBACER,KAAA,QAAKqF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BtF,KAAA,QAAKqF,SAAS,CAAC,kBAAkB,CAACE,IAAI,CAAC,OAAO,CAAAD,QAAA,eAC5CxF,IAAA,MAAGuF,SAAS,CAAC,wBAAwB,CAAI,CAAC,kBAE5C,EAAK,CAAC,cACNrF,KAAA,CAACL,IAAI,EAAC6F,EAAE,CAAC,QAAQ,CAACH,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC3CxF,IAAA,MAAGuF,SAAS,CAAC,uBAAuB,CAAI,CAAC,gBAE3C,EAAM,CAAC,EACJ,CAAC,CAEV,CAEA,GAAI/D,SAAS,CAAE,CACb,mBACEtB,KAAA,QAAKqF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzCxF,IAAA,QAAKuF,SAAS,CAAC,6BAA6B,CAACE,IAAI,CAAC,QAAQ,CAAAD,QAAA,cACxDxF,IAAA,SAAMuF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,uBAAqB,CAAM,CAAC,CAC3D,CAAC,cACNxF,IAAA,MAAGuF,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,yCAAuC,CAAG,CAAC,EACjE,CAAC,CAEV,CAEA;AACA,KAAM,CAAAG,YAAY,CAAGjE,cAAc,CAACkE,MAAM,CAAC,CAACC,GAAG,CAAEpC,QAAQ,GAAK,CAC5D,KAAM,CAAAqC,KAAK,CAAGrC,QAAQ,CAACpC,IAAI,CAAC0E,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE;AAC7C,GAAI,CAACF,GAAG,CAACC,KAAK,CAAC,CAAED,GAAG,CAACC,KAAK,CAAC,CAAG,EAAE,CAChCD,GAAG,CAACC,KAAK,CAAC,CAACrD,IAAI,CAACgB,QAAQ,CAAC,CACzB,MAAO,CAAAoC,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAEN,mBACE3F,KAAA,QAAKqF,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBxF,IAAA,QACEuF,SAAS,CAAC,cAAc,CACxBS,KAAK,CAAE,CACLC,eAAe,CAAE,gEAAgE9F,YAAY,CAAC+F,QAAQ,CAAC9F,EAAE,CAAC,CAAC,GAAG,CAC9G+F,MAAM,CAAE,MACV,CAAE,CAAAX,QAAA,cAEFxF,IAAA,QAAKuF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACrDtF,KAAA,QAAKqF,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCxF,IAAA,OAAIuF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cACrDtF,KAAA,MAAGqF,SAAS,CAAC,sBAAsB,CAAAC,QAAA,EAAC,+BAA6B,CAAC9E,IAAI,CAAC8D,KAAK,EAAI,CAAC,EAC9E,CAAC,CACH,CAAC,CACH,CAAC,cAENxE,IAAA,QAAKuF,SAAS,CAAC,+BAA+B,CAAAC,QAAA,cAC5CtF,KAAA,QAAKqF,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBtF,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBtF,KAAA,QAAKqF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCxF,IAAA,MAAGuF,SAAS,CAAC,wBAAwB,CAAI,CAAC,mBAC1B,cAAAvF,IAAA,WAAAwF,QAAA,CAAS9E,IAAI,CAAC8D,KAAK,CAAS,CAAC,KAAE,CAAC9D,IAAI,CAACgE,QAAQ,CAAC,GAChE,EAAK,CAAC,cAENxE,KAAA,SAAMkG,QAAQ,CAAExC,YAAa,CAAC2B,SAAS,CAAC,cAAc,CAAAC,QAAA,eACpDtF,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBtF,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxF,IAAA,UAAOqG,OAAO,CAAC,UAAU,CAACd,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cACpEtF,KAAA,QAAKqF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BxF,IAAA,SAAMuF,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAChCxF,IAAA,MAAGuF,SAAS,CAAC,cAAc,CAAI,CAAC,CAC5B,CAAC,cACPvF,IAAA,UACEsG,IAAI,CAAC,MAAM,CACXf,SAAS,CAAC,cAAc,CACxBnF,EAAE,CAAC,UAAU,CACbkD,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEvC,WAAW,CAACE,QAAS,CAC5BqF,QAAQ,CAAEnD,iBAAkB,CAC5BoD,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,cACNtG,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxF,IAAA,UAAOqG,OAAO,CAAC,OAAO,CAACd,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC7DtF,KAAA,QAAKqF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BxF,IAAA,SAAMuF,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAChCxF,IAAA,MAAGuF,SAAS,CAAC,gBAAgB,CAAI,CAAC,CAC9B,CAAC,cACPvF,IAAA,UACEsG,IAAI,CAAC,OAAO,CACZf,SAAS,CAAC,cAAc,CACxBnF,EAAE,CAAC,OAAO,CACVkD,IAAI,CAAC,OAAO,CACZC,KAAK,CAAEvC,WAAW,CAACG,KAAM,CACzBoF,QAAQ,CAAEnD,iBAAkB,CAC5BoD,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,EACH,CAAC,cAENtG,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBtF,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxF,IAAA,UAAOqG,OAAO,CAAC,OAAO,CAACd,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cACpEtF,KAAA,QAAKqF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BxF,IAAA,SAAMuF,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAChCxF,IAAA,MAAGuF,SAAS,CAAC,iBAAiB,CAAI,CAAC,CAC/B,CAAC,cACPvF,IAAA,UACEsG,IAAI,CAAC,KAAK,CACVf,SAAS,CAAC,cAAc,CACxBnF,EAAE,CAAC,OAAO,CACVkD,IAAI,CAAC,OAAO,CACZC,KAAK,CAAEvC,WAAW,CAACI,KAAM,CACzBmF,QAAQ,CAAEnD,iBAAkB,CAC5BoD,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,cACNtG,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxF,IAAA,UAAOqG,OAAO,CAAC,cAAc,CAACd,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,0BAAwB,CAAO,CAAC,cACrFtF,KAAA,QAAKqF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BxF,IAAA,SAAMuF,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAChCxF,IAAA,MAAGuF,SAAS,CAAC,cAAc,CAAI,CAAC,CAC5B,CAAC,cACPvF,IAAA,WACEuF,SAAS,CAAC,aAAa,CACvBnF,EAAE,CAAC,cAAc,CACjBkD,IAAI,CAAC,cAAc,CACnBC,KAAK,CAAEvC,WAAW,CAACM,YAAa,CAChCiF,QAAQ,CAAEnD,iBAAkB,CAC5BoD,QAAQ,MAAAhB,QAAA,CAEP,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,EAAE,CAAC,CAACiB,GAAG,CAACC,GAAG,eACtC1G,IAAA,WAAkBuD,KAAK,CAAEmD,GAAI,CAAAlB,QAAA,CAAEkB,GAAG,EAArBA,GAA8B,CAC5C,CAAC,CACI,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,cAENxG,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBxF,IAAA,UAAOqG,OAAO,CAAC,MAAM,CAACd,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cAChExF,IAAA,QAAKuF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCtF,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtF,KAAA,QAAKqF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CxF,IAAA,MAAGuF,SAAS,CAAC,wCAAwC,CAAI,CAAC,cAC1DvF,IAAA,OAAIuF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,4BAA0B,CAAI,CAAC,EAC5D,CAAC,CAELmB,MAAM,CAACC,IAAI,CAACjB,YAAY,CAAC,CAACpF,MAAM,CAAG,CAAC,cACnCP,IAAA,QAAKuF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BmB,MAAM,CAACC,IAAI,CAACjB,YAAY,CAAC,CAACkB,IAAI,CAAC,CAAC,CAACJ,GAAG,CAACX,KAAK,EAAI,CAC7C,KAAM,CAAAgB,SAAS,CAAG,GAAI,CAAA7E,IAAI,CAAC6D,KAAK,CAAG,KAAK,CAAC,CAACiB,cAAc,CAAC,SAAS,CAAE,CAAEjB,KAAK,CAAE,MAAM,CAAEkB,IAAI,CAAE,SAAU,CAAC,CAAC,CAEvG,mBACE9G,KAAA,QAAiBqF,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC/BxF,IAAA,OAAIuF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEsB,SAAS,CAAK,CAAC,cAChD9G,IAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBG,YAAY,CAACG,KAAK,CAAC,CAACW,GAAG,CAAChD,QAAQ,EAAI,CACnC,KAAM,CAAAwD,GAAG,CAAG,GAAI,CAAAhF,IAAI,CAACwB,QAAQ,CAACpC,IAAI,CAAC,CAACe,OAAO,CAAC,CAAC,CAC7C,KAAM,CAAA8E,OAAO,CAAG,GAAI,CAAAjF,IAAI,CAACwB,QAAQ,CAACpC,IAAI,CAAC,CAAC0F,cAAc,CAAC,SAAS,CAAE,CAAEI,OAAO,CAAE,OAAQ,CAAC,CAAC,CAEvF,mBACEjH,KAAA,QAAyBqF,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC9CxF,IAAA,UACEsG,IAAI,CAAC,OAAO,CACZf,SAAS,CAAC,WAAW,CACrBjC,IAAI,CAAC,MAAM,CACXlD,EAAE,CAAE,QAAQqD,QAAQ,CAACpC,IAAI,EAAG,CAC5BkC,KAAK,CAAEE,QAAQ,CAACpC,IAAK,CACrB+F,OAAO,CAAEpG,WAAW,CAACK,IAAI,GAAKoC,QAAQ,CAACpC,IAAK,CAC5CkF,QAAQ,CAAEnD,iBAAkB,CAC5BoD,QAAQ,MACT,CAAC,cACFtG,KAAA,UACEqF,SAAS,CAAE,0CAA0C9B,QAAQ,CAAClB,cAAc,CAAGvB,WAAW,CAACM,YAAY,CAAG,UAAU,CAAG,EAAE,EAAG,CAC5H+E,OAAO,CAAE,QAAQ5C,QAAQ,CAACpC,IAAI,EAAG,CACjCmD,KAAK,CAAEf,QAAQ,CAAClB,cAAc,CAAGvB,WAAW,CAACM,YAAY,CAAG,4BAA4B,CAAG,EAAG,CAAAkE,QAAA,eAE9FxF,IAAA,QAAKuF,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAE0B,OAAO,CAAM,CAAC,cAC3ClH,IAAA,QAAKuF,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEyB,GAAG,CAAM,CAAC,cACpC/G,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAC,QAAA,EACxB/B,QAAQ,CAAClB,cAAc,CAAC,GAAC,CAACkB,QAAQ,CAAClB,cAAc,GAAK,CAAC,CAAG,MAAM,CAAG,OAAO,EACxE,CAAC,EACD,CAAC,GArBAkB,QAAQ,CAACpC,IAsBd,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,GAjCEyE,KAkCL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,cAEN5F,KAAA,QAAKqF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CxF,IAAA,MAAGuF,SAAS,CAAC,uBAAuB,CAAI,CAAC,cACzCvF,IAAA,MAAGuF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,wCAAsC,CAAG,CAAC,EAC3D,CACN,CAEAxE,WAAW,CAACK,IAAI,EAAIO,gBAAgB,eACnC1B,KAAA,QAAKqF,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCxF,IAAA,MAAGuF,SAAS,CAAC,yBAAyB,CAAI,CAAC,mBAC3B,cAAAvF,IAAA,WAAAwF,QAAA,CAAS,GAAI,CAAAvD,IAAI,CAACjB,WAAW,CAACK,IAAI,CAAC,CAACgG,kBAAkB,CAAC,OAAO,CAAE,CAAEF,OAAO,CAAE,MAAM,CAAEH,IAAI,CAAE,SAAS,CAAElB,KAAK,CAAE,MAAM,CAAEmB,GAAG,CAAE,SAAU,CAAC,CAAC,CAAS,CAAC,SAAM,CAACrF,gBAAgB,CAACW,cAAc,CAAC,qBACvM,EAAK,CACN,EACE,CAAC,CACH,CAAC,EACH,CAAC,cAENrC,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBxF,IAAA,UAAOqG,OAAO,CAAC,iBAAiB,CAACd,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,kBAAgB,CAAO,CAAC,cAChFxF,IAAA,aACEuF,SAAS,CAAC,cAAc,CACxBnF,EAAE,CAAC,iBAAiB,CACpBkD,IAAI,CAAC,iBAAiB,CACtBgE,IAAI,CAAC,GAAG,CACR/D,KAAK,CAAEvC,WAAW,CAACO,eAAgB,CACnCgF,QAAQ,CAAEnD,iBAAkB,CAC5BmE,WAAW,CAAC,8CAA8C,CACjD,CAAC,EACT,CAAC,cAENrH,KAAA,QAAKqF,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC5DtF,KAAA,CAACL,IAAI,EAAC6F,EAAE,CAAE,UAAUtF,EAAE,EAAG,CAACmF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eACrExF,IAAA,MAAGuF,SAAS,CAAC,uBAAuB,CAAI,CAAC,eAE3C,EAAM,CAAC,cACPrF,KAAA,WAAQoG,IAAI,CAAC,QAAQ,CAACf,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC5DxF,IAAA,MAAGuF,SAAS,CAAC,yBAAyB,CAAI,CAAC,mBAE7C,EAAQ,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,cAENvF,IAAA,QAAKuF,SAAS,CAAC,UAAU,CAAAC,QAAA,cACvBtF,KAAA,QAAKqF,SAAS,CAAC,oCAAoC,CAACS,KAAK,CAAE,CAAEwB,GAAG,CAAE,MAAO,CAAE,CAAAhC,QAAA,eACzExF,IAAA,QACEyH,GAAG,CAAEtH,YAAY,CAAC+F,QAAQ,CAAC9F,EAAE,CAAC,CAAE,CAChCmF,SAAS,CAAC,cAAc,CACxBmC,GAAG,CAAEhH,IAAI,CAAC8D,KAAM,CAChBwB,KAAK,CAAE,CAAEG,MAAM,CAAE,OAAO,CAAEwB,SAAS,CAAE,OAAQ,CAAE,CAChD,CAAC,cACFzH,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxF,IAAA,OAAIuF,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC/CxF,IAAA,QAAK,CAAC,cACNE,KAAA,QAAKqF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDxF,IAAA,SAAAwF,QAAA,CAAM,OAAK,CAAM,CAAC,cAClBxF,IAAA,SAAMuF,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAE9E,IAAI,CAAC8D,KAAK,CAAO,CAAC,EAC1C,CAAC,cACNtE,KAAA,QAAKqF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDxF,IAAA,SAAAwF,QAAA,CAAM,WAAS,CAAM,CAAC,cACtBxF,IAAA,SAAAwF,QAAA,CAAO9E,IAAI,CAACgE,QAAQ,CAAO,CAAC,EACzB,CAAC,cACNxE,KAAA,QAAKqF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDxF,IAAA,SAAAwF,QAAA,CAAM,WAAS,CAAM,CAAC,cACtBtF,KAAA,SAAAsF,QAAA,EAAO9E,IAAI,CAACkH,QAAQ,CAAC,OAAK,EAAM,CAAC,EAC9B,CAAC,cACN1H,KAAA,QAAKqF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDxF,IAAA,SAAAwF,QAAA,CAAM,mBAAiB,CAAM,CAAC,cAC9BtF,KAAA,SAAAsF,QAAA,EAAM,GAAC,CAAC9E,IAAI,CAACiE,KAAK,EAAO,CAAC,EACvB,CAAC,cACNzE,KAAA,QAAKqF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDxF,IAAA,SAAAwF,QAAA,CAAM,eAAa,CAAM,CAAC,cAC1BxF,IAAA,SAAAwF,QAAA,CAAOxE,WAAW,CAACM,YAAY,CAAO,CAAC,EACpC,CAAC,CAELN,WAAW,CAACM,YAAY,EAAI,CAAC,eAC5BpB,KAAA,QAAKqF,SAAS,CAAC,kDAAkD,CAAAC,QAAA,eAC/DxF,IAAA,SAAAwF,QAAA,CAAM,uBAAqB,CAAM,CAAC,cAClCtF,KAAA,SAAAsF,QAAA,EAAM,IAAE,CAAC,CAAC9E,IAAI,CAACiE,KAAK,CAAG3D,WAAW,CAACM,YAAY,CAAG,GAAG,EAAEuG,OAAO,CAAC,CAAC,CAAC,EAAO,CAAC,EACtE,CACN,CAEA7G,WAAW,CAACK,IAAI,eACfnB,KAAA,QAAKqF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDxF,IAAA,SAAAwF,QAAA,CAAM,OAAK,CAAM,CAAC,cAClBxF,IAAA,SAAAwF,QAAA,CAAO,GAAI,CAAAvD,IAAI,CAACjB,WAAW,CAACK,IAAI,CAAC,CAACgG,kBAAkB,CAAC,CAAC,CAAO,CAAC,EAC3D,CACN,cAEDrH,IAAA,QAAK,CAAC,cACNE,KAAA,QAAKqF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eAClDxF,IAAA,WAAAwF,QAAA,CAAQ,QAAM,CAAQ,CAAC,cACvBtF,KAAA,WAAQqF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAAC,GAAC,CAACxE,WAAW,CAACM,YAAY,EAAI,CAAC,CACjE,CAACZ,IAAI,CAACiE,KAAK,CAAG3D,WAAW,CAACM,YAAY,CAAG,GAAG,EAAEuG,OAAO,CAAC,CAAC,CAAC,CACxD,CAACnH,IAAI,CAACiE,KAAK,CAAG3D,WAAW,CAACM,YAAY,EAAEuG,OAAO,CAAC,CAAC,CAAC,EAAS,CAAC,EAC7D,CAAC,cACN3H,KAAA,QAAKqF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCtF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBxF,IAAA,MAAGuF,SAAS,CAAC,sCAAsC,CAAI,CAAC,oDAE1D,EAAK,CAAC,cACNrF,KAAA,QAAAsF,QAAA,eACExF,IAAA,MAAGuF,SAAS,CAAC,qCAAqC,CAAI,CAAC,oDAEzD,EAAK,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/E,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}